# 我爱填单词 - 微信小游戏

一款趣味英语填字游戏，帮助玩家在游戏中学习单词。

## 项目结构

```
wechat-minigame/
├── game.js                 # 小游戏入口
├── game.json               # 小游戏配置
├── project.config.json     # 项目配置
├── js/
│   ├── config.js           # 全局配置常量
│   ├── main.js             # 主模块（场景管理、渲染循环）
│   ├── libs/
│   │   ├── weapp-adapter.js  # 微信适配器
│   │   └── symbol.js         # Symbol polyfill
│   ├── managers/
│   │   ├── data.js         # 数据管理器（用户、体力、道具、进度）
│   │   └── audio.js        # 音频管理器（背景音乐、音效、发音）
│   ├── scenes/
│   │   ├── home.js         # 首页场景（模式/词库/关卡选择）
│   │   ├── game.js         # 游戏场景（网格/键盘/单词列表）
│   │   ├── settings.js     # 设置场景
│   │   └── leaderboard.js  # 排行榜场景
│   └── utils/
│       └── render.js       # UI渲染工具（Canvas绑定）
└── images/                 # 图片资源
```

## 功能特性

### 游戏模式
- **闯关模式**: 按关卡顺序挑战，每关消耗10体力
- **无限模式**: 无限关卡挑战，体力恢复时可获得奖励
- **计时模式**: 在限定时间内完成尽可能多的单词

### 词库支持
- 小学词库 (3-6年级)
- 初中词库 (7-9年级)
- 高中词库 (必修1-5)
- 考试词库 (KET/PET/四六级/考研/雅思/托福/GRE)

### 核心玩法
- 填字游戏网格，横向和纵向单词交叉
- 虚拟键盘输入字母
- 预填字母提示
- 单词完成后自动发音

### 道具系统
- **提示道具**: 高亮当前单词包含的字母
- **发音道具**: 反复播放当前单词发音

### 体力系统
- 初始体力100，上限200
- 每5分钟恢复1点体力
- 离线自动恢复
- 可通过观看广告获取体力

### 设置选项
- 自动发音开关
- 美音/英音切换
- 背景音乐开关
- 音效开关
- 显示翻译开关

## 技术架构

### 渲染方式
使用 Canvas 2D 进行全部UI渲染，支持：
- 圆角矩形
- 渐变/阴影
- 自定义字体
- 触摸事件检测

### 数据存储
使用 `wx.setStorageSync` / `wx.getStorageSync` 本地存储：
- 用户ID和信息
- 体力和道具数量
- 游戏进度（关卡、星级）
- 设置选项

### API通信
使用 `wx.request` 与后端通信：
- 加载关卡数据
- 提交游戏结果
- 获取排行榜
- 领取奖励

## 开发说明

### 开发环境
1. 安装微信开发者工具
2. 导入项目，选择 `src/wechat-minigame` 目录
3. 填入正确的 AppID

### 调试技巧
- 使用控制台查看日志
- 使用真机预览测试触控
- 检查网络请求是否成功

### 注意事项
- 使用 CommonJS 模块规范（require/module.exports）
- 避免使用 ES6 箭头函数（兼容性问题）
- Canvas 绑定需要手动管理触摸事件

## 后端配置

游戏需要连接后端API，默认地址：`https://superhe.art:10010`

如需修改，请编辑 `js/config.js` 中的 `API_BASE` 变量。

## 版本历史

### v1.0.0
- 初始版本
- 完成闯关、无限、计时三种模式
- 完成31个词库支持
- 完成体力和道具系统
- 完成设置和排行榜功能
