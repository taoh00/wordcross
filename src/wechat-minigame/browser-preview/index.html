<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=375, height=667, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>æˆ‘çˆ±å¡«å•è¯ - å°æ¸¸æˆæµè§ˆå™¨é¢„è§ˆ</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: #1a1a2e;
    }
    #gameContainer {
      width: 375px;
      height: 667px;
      position: relative;
      background: #fff;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    }
    #gameCanvas {
      width: 100%;
      height: 100%;
    }
    .device-frame {
      position: absolute;
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 12px;
      color: #666;
      background: #333;
      padding: 5px 15px;
      border-radius: 10px;
    }
  </style>
</head>
<body>
  <div id="gameContainer">
    <canvas id="gameCanvas" width="375" height="667"></canvas>
  </div>
  
  <script>
    // æ¨¡æ‹Ÿ wx API
    window.wx = {
      getSystemInfoSync: function() {
        return {
          screenWidth: 375,
          screenHeight: 667,
          windowWidth: 375,
          windowHeight: 667,
          pixelRatio: 2,
          platform: 'devtools',
          language: 'zh_CN'
        }
      },
      
      setStorageSync: function(key, value) {
        localStorage.setItem('wx_' + key, JSON.stringify(value))
      },
      
      getStorageSync: function(key) {
        try {
          var value = localStorage.getItem('wx_' + key)
          return value ? JSON.parse(value) : ''
        } catch(e) {
          return ''
        }
      },
      
      removeStorageSync: function(key) {
        localStorage.removeItem('wx_' + key)
      },
      
      showToast: function(options) {
        console.log('[Toast]', options.title)
        // åˆ›å»ºç®€å•toast
        var toast = document.createElement('div')
        toast.style.cssText = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.7);color:#fff;padding:10px 20px;border-radius:5px;z-index:9999;'
        toast.textContent = options.title
        document.body.appendChild(toast)
        setTimeout(function() {
          toast.remove()
        }, options.duration || 1500)
      },
      
      showModal: function(options) {
        var result = confirm(options.content || options.title)
        if (options.success) {
          options.success({ confirm: result, cancel: !result })
        }
      },
      
      request: function(options) {
        fetch(options.url, {
          method: options.method || 'GET',
          headers: options.header || {},
          body: options.data ? JSON.stringify(options.data) : undefined
        })
        .then(function(response) { return response.json() })
        .then(function(data) {
          if (options.success) options.success({ data: data, statusCode: 200 })
        })
        .catch(function(error) {
          if (options.fail) options.fail({ errMsg: error.message })
        })
      },
      
      createInnerAudioContext: function() {
        var audio = new Audio()
        return {
          src: '',
          play: function() { 
            audio.src = this.src
            audio.play().catch(function(){})
          },
          stop: function() { audio.pause(); audio.currentTime = 0 },
          destroy: function() { audio = null },
          onEnded: function(cb) { audio.onended = cb },
          onError: function(cb) { audio.onerror = cb }
        }
      },
      
      vibrateShort: function() {
        if (navigator.vibrate) navigator.vibrate(50)
      },
      
      onTouchStart: function(cb) {
        document.getElementById('gameCanvas').addEventListener('touchstart', function(e) {
          e.preventDefault()
          cb(e)
        })
      },
      
      onTouchEnd: function(cb) {
        document.getElementById('gameCanvas').addEventListener('touchend', function(e) {
          e.preventDefault()
          cb(e)
        })
      },
      
      onTouchMove: function(cb) {
        document.getElementById('gameCanvas').addEventListener('touchmove', function(e) {
          e.preventDefault()
          cb(e)
        })
      }
    }
    
    // æ¨¡æ‹Ÿ GameGlobal
    window.GameGlobal = {
      canvas: document.getElementById('gameCanvas'),
      get window() { return window }
    }
    
    // æç¤ºä¿¡æ¯
    console.log('=== å°æ¸¸æˆæµè§ˆå™¨é¢„è§ˆæ¨¡å¼ ===')
    console.log('æ­¤é¡µé¢æ¨¡æ‹Ÿå¾®ä¿¡å°æ¸¸æˆç¯å¢ƒ')
    console.log('æ³¨æ„ï¼šéƒ¨åˆ†wx APIå¯èƒ½ä¸å®Œå…¨å…¼å®¹')
    
    // åŠ è½½å°æ¸¸æˆä»£ç 
    // ç”±äºå°æ¸¸æˆä½¿ç”¨CommonJSï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†æ¨¡å—åŠ è½½
    // è¿™é‡Œä»…æä¾›æ¡†æ¶ï¼Œå®é™…éœ€è¦å°†å°æ¸¸æˆä»£ç ç¼–è¯‘ä¸ºæµè§ˆå™¨å…¼å®¹ç‰ˆæœ¬
  </script>
  
  <script>
    // ç®€å•æ¼”ç¤ºï¼šç»˜åˆ¶é¦–é¡µå¸ƒå±€
    (function() {
      var canvas = document.getElementById('gameCanvas')
      var ctx = canvas.getContext('2d')
      
      // è®¾ç½®é«˜æ¸…æ˜¾ç¤º
      var dpr = window.devicePixelRatio || 1
      canvas.width = 375 * dpr
      canvas.height = 667 * dpr
      ctx.scale(dpr, dpr)
      
      // ç»˜åˆ¶èƒŒæ™¯
      ctx.fillStyle = '#FFF0F5'
      ctx.fillRect(0, 0, 375, 667)
      
      // ç»˜åˆ¶è£…é¥°ç‚¹
      var dots = ['#FFB6C1', '#98FB98', '#87CEEB', '#FFFACD']
      for (var i = 0; i < 30; i++) {
        ctx.beginPath()
        ctx.arc(
          Math.random() * 375,
          Math.random() * 667,
          Math.random() * 4 + 2,
          0, Math.PI * 2
        )
        ctx.fillStyle = dots[Math.floor(Math.random() * dots.length)]
        ctx.globalAlpha = 0.3
        ctx.fill()
      }
      ctx.globalAlpha = 1
      
      // æ ‡é¢˜
      ctx.fillStyle = '#FF69B4'
      ctx.font = 'bold 28px sans-serif'
      ctx.textAlign = 'center'
      ctx.fillText('ğŸŒŸ æˆ‘çˆ±å¡«å•è¯ ğŸŒŸ', 187, 80)
      
      ctx.fillStyle = '#888'
      ctx.font = '14px sans-serif'
      ctx.fillText('WordCross Â· è¶£å‘³è‹±è¯­å­¦ä¹ ', 187, 110)
      
      // ç”¨æˆ·ä¿¡æ¯æ 
      ctx.fillStyle = '#FFFFFF'
      roundRect(ctx, 20, 140, 335, 50, 12)
      ctx.fill()
      ctx.strokeStyle = '#FFB6C1'
      ctx.lineWidth = 2
      ctx.stroke()
      
      ctx.fillStyle = '#333'
      ctx.font = '16px sans-serif'
      ctx.textAlign = 'left'
      ctx.fillText('ğŸ˜Š æ¸¸å®¢', 40, 172)
      
      ctx.textAlign = 'right'
      ctx.font = '13px sans-serif'
      ctx.fillText('âš¡200  ğŸ’¡20  ğŸ“–20', 340, 172)
      
      // æ¨¡å¼é€‰æ‹©æ ‡é¢˜
      ctx.textAlign = 'center'
      ctx.fillStyle = '#333'
      ctx.font = '18px sans-serif'
      ctx.fillText('ğŸ® é€‰æ‹©æ¸¸æˆæ¨¡å¼', 187, 230)
      
      // æ¨¡å¼æŒ‰é’®
      var modes = [
        { x: 20, y: 260, color: '#FFB6C1', icon: 'ğŸ°', name: 'é—¯å…³æ¨¡å¼', desc: 'é€å…³æŒ‘æˆ˜' },
        { x: 195, y: 260, color: '#98FB98', icon: 'â™¾ï¸', name: 'æ— é™æ¨¡å¼', desc: 'æ— å°½æŒ‘æˆ˜' },
        { x: 20, y: 360, color: '#87CEEB', icon: 'â±ï¸', name: 'è®¡æ—¶æ¨¡å¼', desc: 'é™æ—¶æŒ‘æˆ˜' },
        { x: 195, y: 360, color: '#FFFACD', icon: 'ğŸ†', name: 'æ’è¡Œæ¦œ', desc: 'çœ‹çœ‹æ’å' }
      ]
      
      modes.forEach(function(m) {
        // é˜´å½±
        ctx.fillStyle = darken(m.color)
        roundRect(ctx, m.x, m.y + 4, 160, 80, 16)
        ctx.fill()
        
        // ä¸»ä½“
        ctx.fillStyle = m.color
        roundRect(ctx, m.x, m.y, 160, 80, 16)
        ctx.fill()
        
        // å›¾æ ‡
        ctx.font = '32px sans-serif'
        ctx.textAlign = 'left'
        ctx.fillText(m.icon, m.x + 15, m.y + 50)
        
        // æ–‡å­—
        ctx.fillStyle = '#333'
        ctx.font = 'bold 16px sans-serif'
        ctx.fillText(m.name, m.x + 58, m.y + 38)
        
        ctx.fillStyle = '#666'
        ctx.font = '12px sans-serif'
        ctx.fillText(m.desc, m.x + 58, m.y + 58)
      })
      
      // è®¾ç½®æŒ‰é’®
      ctx.fillStyle = '#BA55D3'
      roundRect(ctx, 20, 474, 335, 50, 12)
      ctx.fill()
      
      ctx.fillStyle = '#DDA0DD'
      roundRect(ctx, 20, 470, 335, 50, 12)
      ctx.fill()
      
      ctx.fillStyle = '#333'
      ctx.font = '16px sans-serif'
      ctx.textAlign = 'center'
      ctx.fillText('âš™ï¸ è®¾ç½®', 187, 502)
      
      // åº•éƒ¨è£…é¥°
      ctx.font = '24px sans-serif'
      ctx.fillText('ğŸ¨ ğŸ“– âœï¸', 187, 580)
      
      // ç‰ˆæœ¬å·
      ctx.fillStyle = '#999'
      ctx.font = '12px sans-serif'
      ctx.fillText('æˆ‘çˆ±å¡«å•è¯ v1.0.0', 187, 640)
      
      function roundRect(ctx, x, y, w, h, r) {
        ctx.beginPath()
        ctx.moveTo(x + r, y)
        ctx.lineTo(x + w - r, y)
        ctx.quadraticCurveTo(x + w, y, x + w, y + r)
        ctx.lineTo(x + w, y + h - r)
        ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h)
        ctx.lineTo(x + r, y + h)
        ctx.quadraticCurveTo(x, y + h, x, y + h - r)
        ctx.lineTo(x, y + r)
        ctx.quadraticCurveTo(x, y, x + r, y)
        ctx.closePath()
      }
      
      function darken(color) {
        // ç®€å•çš„é¢œè‰²åŠ æ·±
        var colors = {
          '#FFB6C1': '#FF69B4',
          '#98FB98': '#3CB371',
          '#87CEEB': '#4682B4',
          '#FFFACD': '#F0E68C'
        }
        return colors[color] || color
      }
    })()
  </script>
</body>
</html>
