<!--pages/leaderboard/leaderboard.wxml-->
<view class="leaderboard-page">
  <!-- æ’è¡Œæ¦œç±»å‹é€‰æ‹© -->
  <scroll-view class="type-tabs" scroll-x>
    <view 
      wx:for="{{ leaderboardTypes }}" 
      wx:key="code"
      class="type-tab {{ currentType === item.code ? 'active' : '' }}"
      bindtap="selectType"
      data-code="{{ item.code }}"
    >
      <text class="tab-icon">{{ item.icon }}</text>
      <text class="tab-name">{{ item.name }}</text>
    </view>
  </scroll-view>

  <!-- æ’è¡Œæ¦œåˆ—è¡¨ -->
  <view class="leaderboard-card card">
    <view wx:if="{{ loading }}" class="loading">
      <text class="loading-icon">â³</text>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
    
    <view wx:elif="{{ rankings.length === 0 }}" class="empty">
      <text class="empty-icon">ğŸ“­</text>
      <text class="empty-text">æš‚æ— æ•°æ®</text>
    </view>
    
    <scroll-view wx:else class="rankings-list" scroll-y>
      <view 
        wx:for="{{ rankings }}" 
        wx:key="rank"
        class="rank-item {{ item.is_me ? 'is-me' : '' }}"
      >
        <!-- æ’å -->
        <view class="rank-badge {{ index < 3 ? 'top-' + (index + 1) : '' }}">
          <text wx:if="{{ index === 0 }}">ğŸ¥‡</text>
          <text wx:elif="{{ index === 1 }}">ğŸ¥ˆ</text>
          <text wx:elif="{{ index === 2 }}">ğŸ¥‰</text>
          <text wx:else>{{ item.rank }}</text>
        </view>
        
        <!-- ç”¨æˆ·ä¿¡æ¯ -->
        <text class="rank-avatar">{{ item.avatar || 'ğŸ˜Š' }}</text>
        <text class="rank-name">{{ item.nickname || 'æ¸¸å®¢' }}</text>
        
        <!-- åˆ†æ•° -->
        <view class="rank-score">
          <text class="score-value">{{ item.value }}</text>
          <text class="score-unit">{{ currentUnit }}</text>
        </view>
      </view>
    </scroll-view>
  </view>
  
  <!-- æˆ‘çš„æ’å -->
  <view wx:if="{{ myRank }}" class="my-rank-card card">
    <text class="my-rank-label">æˆ‘çš„æ’å</text>
    <view class="my-rank-info">
      <text class="my-rank-num">#{{ myRank.rank }}</text>
      <text class="my-rank-score">{{ myRank.value }} {{ currentUnit }}</text>
    </view>
  </view>
</view>
