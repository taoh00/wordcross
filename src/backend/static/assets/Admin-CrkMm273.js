import{_ as q,o as H,a as n,c as l,b as s,e as J,w as O,z as Q,B as X,D as Y,t as a,f as S,F as v,r as p,n as Z,h as i,v as b,j as ss,p as ts}from"./index-DYfv8LOO.js";const es={class:"admin-screen"},as={class:"main-card"},os={class:"nav-row"},ns=["disabled"],ls={key:0,class:"auth-section"},is={class:"auth-form"},ds={key:0,class:"auth-error"},cs={class:"tabs"},rs=["onClick"],us={key:0,class:"loading-state"},vs={key:1,class:"tab-content"},_s={class:"stats-grid-4"},ms={class:"stat-card blue"},ps={class:"stat-value"},gs={class:"stat-card green"},fs={class:"stat-value"},hs={class:"stat-card purple"},ks={class:"stat-value"},bs={class:"stat-card orange"},ys={class:"stat-value"},ws={class:"stats-grid-2"},Cs={class:"stat-card pink"},Ns={class:"stat-value"},Ss={class:"stat-card teal"},xs={class:"stat-value"},Ts={class:"mode-stats-list"},Is={class:"mode-name"},Ps={class:"mode-value"},As={class:"mode-score"},Ds={key:2,class:"tab-content"},Es={class:"section-title"},$s={class:"users-list"},Bs={class:"user-avatar"},Ks={class:"user-info"},Ms={class:"user-name"},Rs={class:"user-id"},Vs={class:"user-meta"},Fs={class:"user-plays"},zs={class:"user-date"},js={key:0,class:"pagination"},Gs=["disabled"],Ls=["disabled"],Us={key:3,class:"tab-content"},Ws={class:"daily-list"},qs={key:4,class:"tab-content"},Hs={class:"feature-list"},Js={class:"feature-name"},Os={class:"feature-users"},Qs={class:"feature-count"},Xs={key:5,class:"tab-content"},Ys={class:"group-stats-list"},Zs={class:"group-name"},st={class:"group-games"},tt={class:"group-users"},et={class:"group-score"},g=20,at={__name:"Admin",setup(ot){const f="",y=i(!1),w=i(!1),c=i(""),_=i(""),r=i("overview"),u=i({}),x=i([]),T=i([]),I=i([]),m=i(0),P=i([]),A=i([]),d=i(0),$=[{code:"overview",name:"æ¦‚è§ˆ",icon:"ğŸ“Š"},{code:"users",name:"ç”¨æˆ·",icon:"ğŸ‘¥"},{code:"daily",name:"æ¯æ—¥",icon:"ğŸ“…"},{code:"groups",name:"åˆ†ç»„",icon:"ğŸ“š"},{code:"features",name:"åŠŸèƒ½",icon:"ğŸ”§"}],B={campaign:"é—¯å…³æ¨¡å¼",endless:"æ— é™æ¨¡å¼",timed:"è®¡æ—¶æ¨¡å¼",pk:"PKæ¨¡å¼"},K={campaign:"ğŸ°",endless:"â™¾ï¸",timed:"â±ï¸",pk:"âš”ï¸"},M={grade3_1:"ä¸‰å¹´çº§ä¸Šå†Œ",grade3_2:"ä¸‰å¹´çº§ä¸‹å†Œ",grade4_1:"å››å¹´çº§ä¸Šå†Œ",grade4_2:"å››å¹´çº§ä¸‹å†Œ",grade5_1:"äº”å¹´çº§ä¸Šå†Œ",grade5_2:"äº”å¹´çº§ä¸‹å†Œ",grade6_1:"å…­å¹´çº§ä¸Šå†Œ",grade6_2:"å…­å¹´çº§ä¸‹å†Œ",junior:"åˆä¸­è¯æ±‡",senior:"é«˜ä¸­è¯æ±‡",ket:"KETè€ƒè¯•",pet:"PETè€ƒè¯•",cet4:"å¤§å­¦å››çº§",cet6:"å¤§å­¦å…­çº§",postgrad:"è€ƒç ”è¯æ±‡",ielts:"é›…æ€",toefl:"æ‰˜ç¦",gre:"GRE"},R={game_campaign:"é—¯å…³æ¨¡å¼",game_endless:"æ— é™æ¨¡å¼",game_timed:"è®¡æ—¶æ¨¡å¼",game_pk:"PKæ¨¡å¼"};function V(o){return K[o]||"ğŸ®"}function F(o){return B[o]||o}function z(o){return M[o]||o}function j(o){return R[o]||o}function h(o){return o?o>=1e4?(o/1e4).toFixed(1)+"ä¸‡":o.toLocaleString():"0"}function G(o){return o?o.split("T")[0]:""}async function C(){var o;_.value="";try{const t=await b.get(`${f}/api/admin/stats/overview`,{params:{token:c.value}});w.value=!0,localStorage.setItem("admin_token",c.value),await D()}catch(t){((o=t.response)==null?void 0:o.status)===403?_.value="å¯†é’¥é”™è¯¯ï¼Œè¯·é‡æ–°è¾“å…¥":_.value="éªŒè¯å¤±è´¥: "+(t.message||"æœªçŸ¥é”™è¯¯")}}async function D(){var o;y.value=!0;try{const t=c.value||localStorage.getItem("admin_token"),k=await b.get(`${f}/api/admin/stats/overview`,{params:{token:t}});u.value=k.data.overview||{},x.value=k.data.mode_stats||[],T.value=k.data.group_stats||[],await N();const e=await b.get(`${f}/api/admin/stats/daily`,{params:{token:t,days:30}});P.value=e.data.stats||[];const E=await b.get(`${f}/api/admin/stats/feature-usage`,{params:{token:t}});A.value=E.data.features||[]}catch(t){console.error("åŠ è½½æ•°æ®å¤±è´¥:",t),((o=t.response)==null?void 0:o.status)===403&&(w.value=!1,_.value="è®¤è¯å·²è¿‡æœŸï¼Œè¯·é‡æ–°éªŒè¯")}finally{y.value=!1}}async function N(){const o=c.value||localStorage.getItem("admin_token"),t=await b.get(`${f}/api/admin/users`,{params:{token:o,limit:g,offset:d.value*g}});I.value=t.data.users||[],m.value=t.data.total||0}function L(){d.value>0&&(d.value--,N())}function U(){(d.value+1)*g<m.value&&(d.value++,N())}async function W(){await D()}return H(()=>{const o=localStorage.getItem("admin_token");o&&(c.value=o,C())}),(o,t)=>{const k=ss("router-link");return n(),l("div",es,[t[16]||(t[16]=s("div",{class:"header-section"},[s("div",{class:"logo-area"},[s("h1",{class:"title"},"ğŸ› ï¸ åå°ç®¡ç†")]),s("p",{class:"subtitle"},"WordCross æ•°æ®ç»Ÿè®¡ä¸­å¿ƒ")],-1)),s("div",as,[s("div",os,[J(k,{to:"/",class:"back-btn"},{default:O(()=>[...t[1]||(t[1]=[ts("â† è¿”å›é¦–é¡µ",-1)])]),_:1}),s("button",{onClick:W,disabled:y.value,class:"refresh-btn-small"}," ğŸ”„ åˆ·æ–° ",8,ns)]),w.value?(n(),l(v,{key:1},[s("div",cs,[(n(),l(v,null,p($,e=>s("button",{key:e.code,onClick:E=>r.value=e.code,class:Z(["tab-btn",{active:r.value===e.code}])},a(e.icon)+" "+a(e.name),11,rs)),64))]),y.value?(n(),l("div",us,[...t[3]||(t[3]=[s("div",{class:"loading-spinner"},"â³",-1),s("p",null,"åŠ è½½ä¸­...",-1)])])):r.value==="overview"?(n(),l("div",vs,[t[10]||(t[10]=s("h3",{class:"section-title"},"ğŸ“Š æ•´ä½“æ¦‚è§ˆ",-1)),s("div",_s,[s("div",ms,[s("div",ps,a(u.value.total_users),1),t[4]||(t[4]=s("div",{class:"stat-label"},"æ€»ç”¨æˆ·æ•°",-1))]),s("div",gs,[s("div",fs,a(u.value.today_active_users),1),t[5]||(t[5]=s("div",{class:"stat-label"},"ä»Šæ—¥æ´»è·ƒ",-1))]),s("div",hs,[s("div",ks,a(u.value.total_games),1),t[6]||(t[6]=s("div",{class:"stat-label"},"æ€»æ¸¸æˆæ¬¡æ•°",-1))]),s("div",bs,[s("div",ys,a(u.value.today_games),1),t[7]||(t[7]=s("div",{class:"stat-label"},"ä»Šæ—¥æ¸¸æˆ",-1))])]),s("div",ws,[s("div",Cs,[s("div",Ns,a(h(u.value.total_score)),1),t[8]||(t[8]=s("div",{class:"stat-label"},"æ€»ç§¯åˆ†",-1))]),s("div",Ss,[s("div",xs,a(h(u.value.total_words)),1),t[9]||(t[9]=s("div",{class:"stat-label"},"å®Œæˆå•è¯",-1))])]),t[11]||(t[11]=s("h3",{class:"section-title"},"ğŸ® å„æ¨¡å¼ç»Ÿè®¡",-1)),s("div",Ts,[(n(!0),l(v,null,p(x.value,e=>(n(),l("div",{key:e.game_mode,class:"mode-stat-row"},[s("span",Is,a(V(e.game_mode))+" "+a(F(e.game_mode)),1),s("span",Ps,a(e.game_count)+" å±€ / "+a(e.user_count)+" äºº",1),s("span",As,a(h(e.total_score))+" åˆ†",1)]))),128))])])):r.value==="users"?(n(),l("div",Ds,[s("h3",Es,"ğŸ‘¥ ç”¨æˆ·åˆ—è¡¨ ("+a(m.value)+"äºº)",1),s("div",$s,[(n(!0),l(v,null,p(I.value,e=>(n(),l("div",{key:e.id,class:"user-row"},[s("span",Bs,a(e.avatar),1),s("div",Ks,[s("div",Ms,a(e.nickname),1),s("div",Rs,a(e.id.substring(0,8))+"...",1)]),s("div",Vs,[s("div",Fs,a(e.total_play_count)+" å±€",1),s("div",zs,a(G(e.created_at)),1)])]))),128))]),m.value>g?(n(),l("div",js,[s("button",{onClick:L,disabled:d.value===0},"ä¸Šä¸€é¡µ",8,Gs),s("span",null,"ç¬¬ "+a(d.value+1)+" / "+a(Math.ceil(m.value/g))+" é¡µ",1),s("button",{onClick:U,disabled:(d.value+1)*g>=m.value},"ä¸‹ä¸€é¡µ",8,Ls)])):S("",!0)])):r.value==="daily"?(n(),l("div",Us,[t[13]||(t[13]=s("h3",{class:"section-title"},"ğŸ“… æ¯æ—¥ç»Ÿè®¡ (è¿‘30å¤©)",-1)),s("div",Ws,[t[12]||(t[12]=s("div",{class:"daily-header"},[s("span",null,"æ—¥æœŸ"),s("span",null,"æ¸¸æˆæ¬¡æ•°"),s("span",null,"æ´»è·ƒç”¨æˆ·"),s("span",null,"æ€»ç§¯åˆ†"),s("span",null,"å•è¯æ•°")],-1)),(n(!0),l(v,null,p(P.value,e=>(n(),l("div",{key:e.date,class:"daily-row"},[s("span",null,a(e.date),1),s("span",null,a(e.game_count),1),s("span",null,a(e.active_users),1),s("span",null,a(h(e.total_score)),1),s("span",null,a(e.total_words),1)]))),128))])])):r.value==="features"?(n(),l("div",qs,[t[14]||(t[14]=s("h3",{class:"section-title"},"ğŸ”§ åŠŸèƒ½ä½¿ç”¨ç»Ÿè®¡",-1)),s("div",Hs,[(n(!0),l(v,null,p(A.value,e=>(n(),l("div",{key:e.feature_name,class:"feature-row"},[s("span",Js,a(j(e.feature_name)),1),s("span",Os,a(e.user_count)+" äººä½¿ç”¨",1),s("span",Qs,a(e.total_usage)+" æ¬¡",1)]))),128))])])):r.value==="groups"?(n(),l("div",Xs,[t[15]||(t[15]=s("h3",{class:"section-title"},"ğŸ“š åˆ†ç»„ç»Ÿè®¡",-1)),s("div",Ys,[(n(!0),l(v,null,p(T.value,e=>(n(),l("div",{key:e.vocab_group,class:"group-stat-row"},[s("span",Zs,a(z(e.vocab_group)),1),s("span",st,a(e.game_count)+" å±€",1),s("span",tt,a(e.user_count)+" äºº",1),s("span",et,a(h(e.total_score))+" åˆ†",1)]))),128))])])):S("",!0)],64)):(n(),l("div",ls,[t[2]||(t[2]=s("h3",null,"ğŸ” ç®¡ç†å‘˜éªŒè¯",-1)),s("div",is,[Q(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),type:"password",placeholder:"è¯·è¾“å…¥ç®¡ç†å‘˜å¯†é’¥",class:"auth-input",onKeyup:Y(C,["enter"])},null,544),[[X,c.value]]),s("button",{onClick:C,class:"auth-btn"},"éªŒè¯")]),_.value?(n(),l("p",ds,a(_.value),1)):S("",!0)]))])])}}},lt=q(at,[["__scopeId","data-v-e26b7fd3"]]);export{lt as default};
